# DEAモデル：包絡型と乗数型の違いについて

## 理論的背景

包絡型（Envelopment Model）と乗数型（Multiplier Model）は**双対問題（Dual Problem）**の関係にあります。理論的には、最適解（効率値）は同じになるはずです。

## 実際の結果が異なる理由

### 1. **数値計算の誤差**
- 浮動小数点演算による微小な誤差が累積される可能性があります
- 通常、差は10^-6程度以下で、実用上は問題ありません

### 2. **epsilon制約の影響（乗数型のみ）**
- 乗数型では**非Archimedean制約**（`v_i >= epsilon`, `u_r >= epsilon`）を使用しています
- これは重みが0になることを防ぐための制約です
- 包絡型にはこのような制約がないため、結果に微小な差が生じることがあります

### 3. **BCCモデルのu0変数**
- BCCモデルの乗数型では、`u0`（自由変数）を`u0+ - u0-`として表現しています
- この変換が数値計算上で完全に一致しない場合があります

### 4. **最適化アルゴリズムの違い**
- 同じ問題でも、異なるアルゴリズムや初期値で異なる結果になる可能性があります
- `scipy.optimize.linprog`の内部実装による影響

## 推奨事項

1. **実用上の判断**: 差が10^-6以下であれば、実用上は同じ結果と見なせます
2. **包絡型の使用**: より安定した結果が必要な場合は、包絡型の使用を推奨します
3. **epsilon値の調整**: 乗数型でより正確な結果が必要な場合は、epsilon値を小さく（例：1e-9）設定できます

## 実装の詳細

### CCRモデル
- 包絡型と乗数型は通常、完全に一致します
- テスト結果では差が0.0000000000でした

### BCCモデル
- 効率値が1.0の場合、微小な差（約0.0000003-0.0000007）が生じることがあります
- これは数値計算の誤差によるものです

## 結論

包絡型と乗数型の結果が異なるのは、主に数値計算の誤差とepsilon制約の影響によるものです。理論的には同じ結果になるはずですが、実装上の制約により微小な差が生じることがあります。実用上は、差が10^-6以下であれば問題ありません。

